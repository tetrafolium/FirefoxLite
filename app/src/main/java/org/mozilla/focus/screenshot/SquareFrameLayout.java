/* -*- Mode: Java; c-basic-offset: 4; tab-width: 4; indent-tabs-mode: nil; -*-
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */

package org.mozilla.focus.screenshot;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.FrameLayout;

public class SquareFrameLayout extends FrameLayout {

public SquareFrameLayout(Context context) {
	super(context);
}

public SquareFrameLayout(Context context, AttributeSet attrs) {
	super(context, attrs);
}

public SquareFrameLayout(Context context, AttributeSet attrs, int defStyle) {
	super(context, attrs, defStyle);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
	int widthMode = MeasureSpec.getMode(widthMeasureSpec);
	int widthSize = MeasureSpec.getSize(widthMeasureSpec);
	int heightMode = MeasureSpec.getMode(heightMeasureSpec);
	int heightSize = MeasureSpec.getSize(heightMeasureSpec);

	int size;
	if (widthMode == MeasureSpec.EXACTLY && widthSize > 0) {
		size = widthSize;
	} else if (heightMode == MeasureSpec.EXACTLY && heightSize > 0) {
		size = heightSize;
	} else {
		size = widthSize < heightSize ? widthSize : heightSize;
	}

	int finalMeasureSpec = MeasureSpec.makeMeasureSpec(size, MeasureSpec.EXACTLY);
	super.onMeasure(finalMeasureSpec, finalMeasureSpec);
}

}
